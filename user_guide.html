
<!DOCTYPE html>


<html lang="English" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>User Guide &#8212; ASTRA 1.0.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=80cc54d1"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Documentation" href="api.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="English"/>
  <meta name="docsearch:version" content="1.0.0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs..."
         aria-label="Search the docs..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">ASTRA</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="getting_started.html">
    Getting Started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="api.html">
    API Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="developer_guide.html">
    Developer Guide
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs..."
         aria-label="Search the docs..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/duartegroup/astra" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="getting_started.html">
    Getting Started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="api.html">
    API Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="developer_guide.html">
    Developer Guide
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs..."
         aria-label="Search the docs..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/duartegroup/astra" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"></div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">User Guide</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="user-guide">
<h1>User Guide<a class="headerlink" href="#user-guide" title="Link to this heading">#</a></h1>
<p>This page details how to use ASTRA. ASTRA provides a command-line interface (CLI) for benchmarking and comparing machine learning models.</p>
<section id="benchmarking-models">
<h2>Benchmarking Models<a class="headerlink" href="#benchmarking-models" title="Link to this heading">#</a></h2>
<p>Use <cite>astra benchmark</cite> to run performance benchmarks across different models using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>astra<span class="w"> </span>benchmark<span class="w"> </span>&lt;data&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">data</span></code> is the path to the dataset to train and evaluate models on. This should be a <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code>, saved in CSV, pickle, or parquet format (which will be inferred from the file ending, and needs to be <code class="docutils literal notranslate"><span class="pre">.csv</span></code>, <code class="docutils literal notranslate"><span class="pre">.pkl</span></code>, <code class="docutils literal notranslate"><span class="pre">.pickle</span></code>, or <code class="docutils literal notranslate"><span class="pre">.parquet</span></code>), containing input features, the target variable, and a column indicating which fold a data point belongs to. See <a class="reference external" href="https://github.com/duartegroup/astra/blob/main/astra/data/example_df.csv">here</a> for an example.</p>
<p><strong>Options:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--name</span></code>: Name of the experiment. Results will be saved in a folder with this name in the 'results' directory. Will be used to load cached results if they exist. Default: <code class="docutils literal notranslate"><span class="pre">data</span></code> file name (without the extension).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--features</span></code>: Name of the column containing the features. Default: Features.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--target</span></code>: Name of the column containing the target. Default: Target.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--run_nested_CV</span></code>: Whether to run nested CV with hyperparameter tuning for the best models. Default: False.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--use_optuna</span></code>: Whether to use Optuna for hyperparameter tuning. Default: False.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--n_trials</span></code>: Number of trials for Optuna hyperparameter search. Default: 100.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--timeout</span></code>: Time limit (in seconds) for Optuna hyperparameter search. Default: 3600.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--fold_col</span></code>: Name(s) of the column(s) containing the <em>0-indexed</em> CV fold number(s). If a list is provided, models will be benchmarked in an nxk-fold CV, where n is the number of repeats and k is the number of folds. If a single string is provided, it will be treated as a single fold column. nxk-fold CV does not currently support nested CV and final hyperparameter tuning. Default: Fold.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--main_metric</span></code>: Main metric to use for model selection. This will be used to infer the prediction task (classification or regression). Default: R2.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--sec_metrics</span></code>: Secondary metrics to use for model selection. Default: MSE, MAE.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--parametric</span></code>: Whether to use parametric statistical tests for model comparison. If 'auto' (default), the assumptions of parametric tests will be checked, and parametric tests will be used if the assumptions are met.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--impute</span></code>: Method to use for imputing missing values. If None, no imputation will be performed. Valid choices are 'mean', 'median', 'knn', or a float or int value for constant imputation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--remove_constant</span></code>: If specified, features with variance below this threshold will be removed. If None, no features are removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--remove_correlated</span></code>: If specified, features with correlation above this threshold will be removed. If None, no features are removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--scaler</span></code>: Type of scaler to use, if the data is to be scaled first. Valid choices are 'Standard' and 'MinMax'. Default: None.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--n_jobs</span></code>: Number of jobs to run in parallel for hyperparameter tuning. Default: 1.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Metrics are not case-sensitive. See <a class="reference external" href="https://github.com/duartegroup/astra/blob/main/astra/metrics.py#L99">here</a> for an overview of available metrics.</p>
</div>
<p>Alternatively, you can specify some or all arguments using a configuration file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>astra<span class="w"> </span>benchmark<span class="w"> </span>--config<span class="w"> </span>&lt;path<span class="w"> </span>to<span class="w"> </span>config<span class="w"> </span>file&gt;
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/duartegroup/astra/blob/main/configs/example.yml">here</a> for an example. Arguments in the configuration file will override CLI arguments.</p>
<p>By default, ASTRA will benchmark all implemented <a class="reference external" href="https://github.com/duartegroup/astra/blob/main/astra/models/classification.py">classification</a> or <a class="reference external" href="https://github.com/duartegroup/astra/blob/main/astra/models/regression.py">regression</a> models, and search over default hyperparameter grids. You can specify which models to consider, custom starting hyperparameters, and custom hyperparameter search spaces in the configuration file. When using Optuna, custom hyperparameters will be converted into integer, float, or categorical Optuna distributions.</p>
<p>The benchmark script will create the following files under <code class="docutils literal notranslate"><span class="pre">results/&lt;name&gt;</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">default_CV.pkl</span></code>: A dictionary containing CV scores of the main and secondary metrics for all models using default hyperparameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nested_CV.pkl</span></code>: A dictionary containing CV scores of the main and secondary metrics for all models with optimised hyperparameters using nested grid-search.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">final_CV.pkl</span></code>: A dictionary containing CV scores of the main and secondary metrics for the final model with optimised hyperparameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">final_CV_hparam_search.csv</span></code>: Final hyperparameter search results (<code class="docutils literal notranslate"><span class="pre">cv_results_</span></code> of <code class="docutils literal notranslate"><span class="pre">GridSearchCV</span></code> or <code class="docutils literal notranslate"><span class="pre">trials_dataframe</span></code> of <code class="docutils literal notranslate"><span class="pre">OptunaSearchCV</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">final_model.pkl</span></code>: The best performing model, refit on the whole dataset.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">final_hyperparameters.pkl</span></code>: A dictionary of the optimal hyperparameters.</p></li>
</ul>
</section>
<section id="comparing-models">
<h2>Comparing Models<a class="headerlink" href="#comparing-models" title="Link to this heading">#</a></h2>
<p>Use <cite>astra compare</cite> to statistically analyse benchmark results:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>astra<span class="w"> </span>compare<span class="w"> </span>&lt;CV_results_path&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">CV_results_path</span></code> is a list of paths to directories containing CV results, or the path to a single directory containing all CV results. CV results should be pickled dictionaries with metrics as keys and lists of scores as values, for example, <code class="docutils literal notranslate"><span class="pre">final_CV.pkl</span></code> returned by <cite>astra benchmark</cite>, and ending with <code class="docutils literal notranslate"><span class="pre">final_CV.pkl</span></code>. The model name will be the parent directory if passing a list of paths, or the file name (minus the <code class="docutils literal notranslate"><span class="pre">final_CV.pkl</span></code>) if passing a single directory.</p>
<p><strong>Options:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--main_metric</span></code>: The main metric to use for comparison.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--sec_metrics</span></code>: Secondary metrics to use for comparison.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--parametric</span></code>: Whether to use parametric statistical tests for model comparison. If 'auto' (default), the assumptions of parametric tests will be checked, and parametric tests will be used if the assumptions are met.</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#benchmarking-models">Benchmarking Models</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comparing-models">Comparing Models</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/user_guide.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      Â© Copyright 2025, Wojtek Treyde. Project structure based on the Computational Molecular Science Python Cookiecutter version 1.10.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>